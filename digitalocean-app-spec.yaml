alerts:
- rule: DEPLOYMENT_FAILED
- rule: DOMAIN_FAILED
envs:
- key: NODE_ENV
  scope: RUN_AND_BUILD_TIME
  value: production
features:
- buildpack-stack=ubuntu-22
ingress:
  rules:
  - component:
      name: web
    match:
      authority:
        exact: ""
      path:
        prefix: /
  - component:
      name: api
    match:
      authority:
        exact: ""
      path:
        prefix: /api
name: docuslicer
region: sfo
services:
- build_command: npm install && npm run build:api
  environment_slug: node-js
  github:
    branch: master
    deploy_on_push: true
    repo: ginuineca/docuslicerv2
  http_port: 3001
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-1gb
  name: api
  run_command: npm run start
  source_dir: /apps/api
  envs:
  - key: PORT
    scope: RUN_AND_BUILD_TIME
    value: "3001"
  - key: FRONTEND_URL
    scope: RUN_AND_BUILD_TIME
    value: ${APP_URL}
static_sites:
- build_command: npm install && npm run build:web
  environment_slug: node-js
  github:
    branch: master
    deploy_on_push: true
    repo: ginuineca/docuslicerv2
  name: web
  output_dir: /dist
  source_dir: /apps/web
  envs:
  - key: VITE_API_URL
    scope: BUILD_TIME
    value: ${APP_URL}
